rules_version = '2';

service cloud.firestore {
  match /databases/{database}/documents {
    
    // Dictionary collection - Allow public read, admin-only write
    match /dictionary/{docId} {
      allow read: if true;  // Anyone can read dictionary
      allow write, delete: if true;  // Temporarily allow all writes for testing
    }
    
    // Pending word submissions - Allow authenticated users
    match /pending_words/{docId} {
      allow read: if true;  // Allow admin to read all submissions
      allow create: if true;  // Allow anyone to submit words
      allow update, delete: if true;  // Allow admin to approve/reject
    }
    
    // Submissions collection (if used by your app)
    match /submissions/{docId} {
      allow read, write: if true;
    }
    
    // User points - users manage their own, admin manages all
    match /user_points/{userEmail} {
      // Users can read and write their own points
      allow read, write: if request.auth != null && 
        request.auth.token.email == userEmail;
      
      // Admin can read and write all user points
      allow read, write: if request.auth != null && 
        request.auth.token.email == 'edu.mmkr@gmail.com';
    }
    
    // User Reports - Allow authenticated users to create, admin to manage
    match /user_reports/{reportId} {
      allow read, write: if true;  // Temporarily allow all for testing (same pattern as other collections)
    }
    
    // Default: deny everything else
    match /{document=**} {
      allow read, write: if false;
    }
  }
}

